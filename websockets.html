<!DOCTYPE html>
<html>
  <head>
    <title>websocket test</title>
    <!--
    <script>
      window.addEventListener('load', function() {
        var div    = document.getElementById("msg");

        var action = function() {
          var n      = document.getElementById("num").value;
          var host   = "ws://localhost:3000/" + n;
          var socket = new WebSocket(host);
          socket.onopen = function(open) {
            div.innerHTML += "Open<br>";
            socket.send("test");
            socket.onmessage = function(message) {
              div.innerHTML += "Message: " + message.data + "<br>";
            }
            socket.onclose = function(close) {
              div.innerHTML += "Close<br>";
            }
          }
        }

        document.getElementById("start_button")
          .addEventListener("click", action, false);

      });
    </script>
    -->
    </head>
    <body>
    <script>
        var conn = new WebSocket("ws://localhost:3000/1");
        conn.onopen = function() {
            document.write("<p>open!</p>");
            document.write("<button id=button>Send another message</button>")
            document.getElementById("button").addEventListener("click", function(){
                var msg = prompt("Enter a message for the server");
                conn.send(msg);
            });
            conn.send('{"tag":"UpdateLocation","contents":{"accuracy":100,"latitude":100,"altitude":135,"longitude":100}}');
        };
        conn.onmessage = function(e) {
            document.write("<p>" + e.data + "</p>");
        };
    </script>
    </body>
</html>
